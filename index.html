<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="jquery.timeago.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="main.css">
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Lemon' rel='stylesheet' type='text/css'>
    <title>Twittler</title>
  </head>
  <body>
    <header>
      <span class="headerLeft">
        <img src="imgs/home.png" alt=""/>
      </span>
      <span class="headerCenter">Twittler</span>
    </header>
    <div class="content">
      <section class="left">
        <img src="imgs/jasenlew.jpeg" alt=""/>
        <div class="user">
          <span class="name">Jasen Lew</span><br>
          <span class="handle">@jasenlew</span>
          <!--NEED TO COMPLETE / UPDATE LABEL-->
          <form class="formTweetle">
            <textarea id="wuh" name="userTwittle" placeholder="Type your 140 character max tweetle."></textarea><br>
            <input type="button" id="wuhButton" name="submit" value="Tweetle!">
          </form>
        </div>
      </section>
      <section class="board">
        <div class="title">
          <span>Tweets</span>
          <button id="refresh">Refresh Tweetles</button>
        </div>
        <div class="tweets">
          <div class="tweet">
          </div>
        </div>
      </section>
    </div>
    <script>

      $(document).ready(function(){

        var tweetUp = function () {
          var $message = $('.tweet');
          $message.html('');

          var index = streams.home.length - 1;

          while (index >= 0) {

            var tweet = streams.home[index];
            var $author = $('<a href=# class="author"></a>');
            var $handle = $('<span class="handle"></span><br>');
            var $tweet = $('<span class="message"></span><br><br>');

            var name;
            var imgPath;

            if (tweet.user === "shawndrost") {
              name = "Shawn Drost";
              imgPath = "imgs/shawndrost.jpg";
            } else if (tweet.user === "sharksforcheap") {
              name = "Tony Phillips";
              imgPath = "imgs/tonyphillips.jpg";
            } else if (tweet.user === "mracus") {
              name = "Marcus Phillips";
              imgPath = "imgs/marcusphillips.jpg";
            } else if (tweet.user === "douglascalhoun") {
              name = "Douglas Calhoun";
              imgPath = "imgs/dougcalhoun.jpg";
            } else {
              name = "Visitor";
              imgPath = "guest.png";
            }


            $author.text(name);
            $handle.text(' - @' + tweet.user + ' - ' + $.timeago(tweet.created_at));
            $tweet.text(tweet.message);
            $('<img src="'+ imgPath +'"><br>').appendTo($message);

            $author.appendTo($message);
            $handle.appendTo($message);
            $tweet.appendTo($message);

            $('.author').attr('href', "http://www.yahoo.com");

            index -= 1;
          }
        };

        tweetUp();

        $('.headerLeft').click(function() {
            location.reload();
        });

        $('#refresh').on('click', function () {
          tweetUp();
        });

        $("#wuhButton").on("click",function () {
          writeTweet($("#wuh").val());
        });

      });

    </script>
  </body>
</html>
